#!/bin/bash

# Extract and set JWT token from Keycloak response
# The access_token is what you need

JWT_TOKEN="eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJDdjhRQVpEa3pYTlVvSXdNTnpZQWxBSmlBWlUtbmlvelV4VG96R0I4eXM0In0.eyJleHAiOjE3NjcxODc4MzQsImlhdCI6MTc2NzE4NjAzNCwiYXV0aF90aW1lIjoxNzY3MTg2MDI5LCJqdGkiOiJvbnJ0YWM6YWJiNmY1MTQtOGUyOC0xOTVkLWMyOGQtNDk0YjU0M2NhZjJlIiwiaXNzIjoiaHR0cHM6Ly9rZXljbG9hay53b2xmZWRnZWxhYnMuY29tOjg0NDMvcmVhbG1zL2NhbnRvbi1kZXZuZXQiLCJhdWQiOiJhY2NvdW50Iiwic3ViIjoiODEwMGIyZGItODZjZi00MGExLTgzNTEtNTU0ODNjMTUxY2RjIiwidHlwIjoiQmVhcmVyIiwiYXpwIjoiYWNjb3VudC1jb25zb2xlIiwic2lkIjoiY2JjOWYzMWEtNmRlYS00YzUyLWI5NWUtYWE4OTQ3YjhkNWU3IiwiYWNyIjoiMCIsInJlc291cmNlX2FjY2VzcyI6eyJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiXX19LCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGVtYWlsIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5hbWUiOiJab3lhIE11aGFtbWFkIiwicHJlZmVycmVkX3VzZXJuYW1lIjoiem95YSIsImdpdmVuX25hbWUiOiJab3lhIiwiZmFtaWx5X25hbWUiOiJNdWhhbW1hZCIsImVtYWlsIjoiem95YW11aGFtbWFkOTlAZ21haWwuY29tIn0.Fn4u-h7O8WO6DnxadZRDrouk1XXLg8Ha_eaG6ZPkbn6Pey7AvOYoTN3UbrW7jFSwfv3LIOVStrxUBpd3tklAXicxyh1roDUa1I-h3ZI3tx_Ii4UTg41XNmT6GoLJcj3bMsvJumKpKUBQ06MH5zBzNMM-Gfq-dOMeGS3qTh5wJ4naI8B5jZ_DNN_zlMOzH9jNDJWdUW3WBwsqUkhz5QH_Qp4x1RskQ7ekzA0adBHn4G13tPT_3VkCeDiMwBf4LcM31hhYlSOlaENyG0lz_3fA6yahEKsNBkKW006a-Q7R1df87Ci6sIGAHO_heSjlAVf_KKLsFbSo_sC9gcf1Njbjxg"

# Export the token
export JWT_TOKEN

echo "âœ… JWT Token set successfully!"
echo ""
echo "Token expires in: 1800 seconds (30 minutes)"
echo ""
echo "Now you can run deployment:"
echo "  ./scripts/upload-dar-live.sh"
echo ""

